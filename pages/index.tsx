import type { NextPage } from 'next'
import Head from 'next/head'
import {
  Box,
  Flex,
  Text,
  Link,
  Icon,
  Image,
  Stack,
  HStack,
  Spacer,
  Heading,
  Container,
  Button,
  IconButton,
  useColorMode,
  Wrap,
  SimpleGrid,
  Badge,
  Input,
  Accordion,
  AccordionItem,
  AccordionButton,
  AccordionPanel,
  AccordionIcon,
  Modal,
  ModalOverlay,
  ModalContent,
  ModalHeader,
  ModalFooter,
  ModalBody,
  ModalCloseButton,
  useDisclosure,
  Alert,
  AlertIcon,
  AlertTitle,
  AlertDescription,
  CloseButton,
} from '@chakra-ui/react'
import { MoonIcon, SunIcon } from '@chakra-ui/icons'
import { FaGithub } from 'react-icons/fa'
import { useState, useRef } from 'react'

const Home: NextPage = () => {
  const { colorMode, toggleColorMode } = useColorMode()
  const [dns, setDns] = useState('üëã')
  fetch('https://5msb5hc-hudqfxvegkec-dnscheck.shuneara.com/', {
    method: 'HEAD',
    mode: 'no-cors',
    cache: 'no-cache',
  }).then((response) => setDns('üëè'))
  const domainRef = useRef<HTMLInputElement>(null)
  const { isOpen, onOpen, onClose } = useDisclosure()
  return (
    <Container maxW="container.xl">
      <Head>
        <title>Shuneara DNS</title>
        <meta name="description" content="„Éó„É©„Ç§„Éê„Ç∑„Éº„ÇíÂÆà„ÇãDNS" />
        <meta
          name="viewport"
          content="width=device-width,maximum-scale=1.0"
        ></meta>
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Flex minH="96vh" direction="column">
        <HStack as="header" mt={4}>
          <Link href="https://dns.shuneara.com/">
            <Heading
              bgGradient="linear(to-l, #7928CA, #FF0080)"
              bgClip="text"
              fontSize="2xl"
              fontWeight="bold"
              letterSpacing="tight"
            >
              Shuneara DNS
            </Heading>
          </Link>
          <Text title="Ë®≠ÂÆöÁä∂ÊÖã">{dns}</Text>
          <Spacer />
          <IconButton
            aria-label="DarkMode Switch"
            icon={colorMode === 'light' ? <MoonIcon /> : <SunIcon />}
            onClick={toggleColorMode}
          />
        </HStack>

        <Flex direction="column" grow={1}>
          <Text fontSize="4xl" align="center" mt={20}>
            „Éó„É©„Ç§„Éê„Ç∑„Éº„Å®„Çª„Ç≠„É•„É™„ÉÜ„Ç£
          </Text>
          <SimpleGrid
            mt={10}
            columns={2}
            spacing={10}
            templateColumns={{ base: 'auto', md: '1fr 2fr' }}
          >
            <Box boxSize="auto">
              <Image src="pablo-prohibited-content.png" alt="Âç±Èô∫„Å™„Çµ„Ç§„Éà" />
            </Box>
            <Box>
              <Stack spacing={4} mt={4}>
                <Text>„ÇÇ„ÅÜÂç±Èô∫„Å™„Çµ„Ç§„Éà„Å®„ÅØ„Åä„Åï„Çâ„Å∞</Text>
                <Wrap>
                  <Badge fontSize="sm">DNSSEC</Badge>
                  <Badge fontSize="sm">NO LOGS</Badge>
                  <Badge fontSize="sm">NO EDNS</Badge>
                  <Badge fontSize="sm">Null IP</Badge>
                  <Badge fontSize="sm">TCPBBR</Badge>
                  <Badge fontSize="sm">DGAS</Badge>
                  <Badge fontSize="sm">NRDS</Badge>
                  <Badge
                    fontSize="sm"
                    color="white"
                    bgGradient="linear(to-r, #aa4b6b, #6b6b83, #3b8d99)"
                    fontWeight="bold"
                    letterSpacing="tight"
                  >
                    ENS/Unstoppable Domain/Handshake
                  </Badge>
                  {/* sÂÖ•„Çå„Å™„ÅÑ */}
                </Wrap>
                <Text>
                  ÊúÄÂ∞èTTL„ÅÆÊõ∏„ÅçÊèõ„Åà„ÄÅCNAME Cloaking„ÇíÈò≤„Åê„Åì„Å®„ÇÇ„Åß„Åç„Åæ„Åô
                </Text>
                <Text>
                  "„Åì„Çå„ÅØDNS„É¨„Éô„É´„ÅÆ„Éñ„É≠„ÉÉ„Ç≠„É≥„Ç∞„Åß„Åô"
                  YouTube„Å™„Å©„ÅÆÂ∫ÉÂëä„Å´ÂØæ„Åó„Å¶„ÅØÂäπÊûú„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÅ„Åæ„Åü‰∏ÄÈÉ®„ÅÆ„Çµ„Ç§„Éà„ÅåÊ≠£„Åó„ÅèÂãï‰Ωú„Åó„Å™„ÅÑÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô
                </Text>
                <HStack pt={2}>
                  <Input
                    ref={domainRef}
                    type="text"
                    placeholder="„Åì„Åì„Åß„Éñ„É≠„ÉÉ„ÇØ„ÅÆÁ¢∫Ë™ç„Çí„Åô„Çã"
                  />
                  <Button
                    onClick={() => {
                      window.open(
                        `https://shuneara-dns.deno.dev/${domainRef.current?.value}`,
                        '_blank'
                      )
                    }}
                  >
                    Á¢∫Ë™ç
                  </Button>
                </HStack>
                <Text>
                  Illustration by{' '}
                  <a href="https://icons8.com/illustrations/author/60872b904391d1000c87ab70">
                    Marina Mogulskaya
                  </a>{' '}
                  from <a href="https://icons8.com/illustrations">Ouch!</a>
                </Text>
              </Stack>
            </Box>
          </SimpleGrid>
          <Text fontSize="2xl" mt={8}>
            DNS„ÅÆË®≠ÂÆöÊñπÊ≥ï
          </Text>
          {/* <Alert status="error" mt={4}>
            <AlertIcon />
            <AlertTitle mr={2}>Â∑•‰∫ã‰∏≠</AlertTitle>
            <AlertDescription>Â∑•‰∫ã‰∏≠</AlertDescription>
            <CloseButton position="absolute" right="8px" top="8px" />
          </Alert> */}
          <Accordion defaultIndex={[0]} allowMultiple mt="auto" mb="auto" p={4}>
            <AccordionItem>
              <h2>
                <AccordionButton>
                  <Box flex="1" textAlign="left">
                    Plain DNS (ÈÄöÂ∏∏„ÅÆDNS)
                  </Box>
                  <AccordionIcon />
                </AccordionButton>
              </h2>
              <AccordionPanel pb={4}>
                <Link
                  title="„Ç≥„Éî„Éº"
                  onClick={() => {
                    navigator.clipboard.writeText('152.70.108.7')
                  }}
                >
                  IPv4
                </Link>
              </AccordionPanel>
            </AccordionItem>

            <AccordionItem>
              <h2>
                <AccordionButton>
                  <Box flex="1" textAlign="left">
                    DoQ
                  </Box>
                  <AccordionIcon />
                </AccordionButton>
              </h2>
              <AccordionPanel pb={4}>
                <Link
                  title="„Ç≥„Éî„Éº"
                  onClick={() => {
                    navigator.clipboard.writeText('quic://dns.shuneara.com')
                  }}
                >
                  quic://dns.shuneara.com
                </Link>
              </AccordionPanel>
            </AccordionItem>

            <AccordionItem>
              <h2>
                <AccordionButton>
                  <Box flex="1" textAlign="left">
                    DoH
                  </Box>
                  <AccordionIcon />
                </AccordionButton>
              </h2>
              <AccordionPanel pb={4}>
                <Link
                  title="„Ç≥„Éî„Éº"
                  onClick={() => {
                    navigator.clipboard.writeText(
                      'https://dns.shuneara.com/dns-query'
                    )
                  }}
                >
                  https://dns.shuneara.com/dns-query
                </Link>
                <br />
                <Link
                  title="„Ç≥„Éî„Éº"
                  onClick={() => {
                    navigator.clipboard.writeText(
                      'https://cdn.shuneara.com/dns-query'
                    )
                  }}
                >
                  https://cdn.shuneara.com/dns-query
                </Link>
              </AccordionPanel>
            </AccordionItem>

            <AccordionItem>
              <h2>
                <AccordionButton>
                  <Box flex="1" textAlign="left">
                    DoT (AndroidÂêë„Åë)
                  </Box>
                  <AccordionIcon />
                </AccordionButton>
              </h2>
              <AccordionPanel pb={4}>
                <Link
                  title="„Ç≥„Éî„Éº"
                  onClick={() => {
                    navigator.clipboard.writeText('dns.shuneara.com')
                  }}
                >
                  dns.shuneara.com
                </Link>
              </AccordionPanel>
            </AccordionItem>

            <AccordionItem>
              <h2>
                <AccordionButton>
                  <Box flex="1" textAlign="left">
                    Windows
                  </Box>
                  <AccordionIcon />
                </AccordionButton>
              </h2>
              <AccordionPanel pb={4}>
                <Link
                  title="„Ç≥„Éî„Éº"
                  onClick={() => {
                    navigator.clipboard.writeText(
                      "Add-DnsClientDohServerAddress -ServerAddress '152.70.108.7' -DohTemplate 'https://cdn.shuneara.com/dns-query'"
                    )
                  }}
                >
                  „Åì„Çå„ÇíPowerShell„ÅßÂÆüË°å
                </Link>
                <br />
                <Link href="https://news.mynavi.jp/techplus/article/20210701-1912891/">
                  Ë©≥Á¥∞„ÅØ„Åì„Å°„Çâ
                </Link>
              </AccordionPanel>
            </AccordionItem>

            <AccordionItem>
              <h2>
                <AccordionButton>
                  <Box flex="1" textAlign="left">
                    iOS & Mac
                  </Box>
                  <AccordionIcon />
                </AccordionButton>
              </h2>
              <AccordionPanel pb={4}>
                <Link href="https://raw.githubusercontent.com/shuneara/shuneara-dns/main/dns.mobileconfig">
                  „Ç§„É≥„Çπ„Éà„Éº„É´
                </Link>
              </AccordionPanel>
            </AccordionItem>

            <AccordionItem>
              <h2>
                <AccordionButton>
                  <Box flex="1" textAlign="left">
                    Ë©≥Á¥∞
                  </Box>
                  <AccordionIcon />
                </AccordionButton>
              </h2>
              <AccordionPanel pb={4}>
                <Link onClick={onOpen}>
                  „Çª„Ç≠„É•„É™„ÉÜ„Ç£ÂØæÁ≠ñ„Å®„Åó„Å¶„Åì„Çå„Çâ„ÅÆ„Éñ„É≠„ÉÉ„ÇØ„Çí„Åó„Åæ„Åô
                </Link>
                <Modal isOpen={isOpen} onClose={onClose}>
                  <ModalOverlay />
                  <ModalContent>
                    <ModalHeader>„Éñ„É≠„ÉÉ„ÇØ</ModalHeader>
                    <ModalCloseButton />
                    <ModalBody>
                      <Text>
                        „Éú„ÉÉ„Éà„Éç„ÉÉ„Éà
                        <br />
                        C&C„Çµ„Éº„Éê„Éº
                        <br />
                        ÊöóÂè∑Êé°Êéò
                        <br />
                        DGA„Éâ„É°„Ç§„É≥
                        <br />
                        DNS„Éà„É≥„Éç„É™„É≥„Ç∞
                        <br />
                        Êñ∞„Åó„ÅèÁôªÈå≤„Åï„Çå„Åü„Éâ„É°„Ç§„É≥
                        <br />
                        ËÑÖÂ®Å„Å´„Åï„Çâ„Åï„Çå„Çã„Éâ„É°„Ç§„É≥
                        <br />
                        „Éó„É©„Ç§„Éô„Éº„ÉàIP„Ç¢„Éâ„É¨„Çπ„Å´Ëß£Ê±∫„Åï„Çå„Çã„Éâ„É°„Ç§„É≥
                        <br />
                        „Çø„Ç§„Éù„Çπ„ÇØ„ÉØ„ÉÉ„ÉÜ„Ç£„É≥„Ç∞
                      </Text>
                    </ModalBody>

                    <ModalFooter>
                      <Button colorScheme="blue" mr={3} onClick={onClose}>
                        Èñâ„Åò„Çã
                      </Button>
                    </ModalFooter>
                  </ModalContent>
                </Modal>
                <Text>
                  Ë¶ã„Çå„Å™„ÅÑ„Çµ„Ç§„Éà„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅØ
                  <Link href="https://forms.office.com/r/PpJG2dBHsQ">
                    „Åì„Åì„Åã„Çâ
                  </Link>
                  Â†±Âëä„Åß„Åç„Åæ„Åô
                </Text>
                <Text>
                  „Ç¢„ÇØ„Çª„Çπ„É≠„Ç∞(IP„Ç¢„Éâ„É¨„Çπ)„ÄÅDNS„ÇØ„Ç®„É™„É≠„Ç∞„Çí‰øùÊåÅ„Åó„Åæ„Åõ„Çì
                </Text>
              </AccordionPanel>
            </AccordionItem>
          </Accordion>
        </Flex>
      </Flex>

      <HStack as="footer" minH="4vh">
        <Link href="https://github.com/shuneara/shuneara-dns">
          <Icon as={FaGithub} w={6} h={6} />
        </Link>
        <Spacer></Spacer>
        <Text>‚ï∞ ( ‚óï ·óú ‚óï )</Text>
        <Text className="hand">‚ïØ</Text>
        <Spacer></Spacer>
      </HStack>
    </Container>
  )
}

export default Home
